<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 12 (filtered)">
<title>Protocol Bridge Claims Provider</title>
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Batang;
	panose-1:2 3 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Franklin Gothic Condensed";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
@font-face
	{font-family:"Britannic Bold";
	panose-1:2 11 9 3 6 7 3 2 2 4;}
@font-face
	{font-family:"\@Batang";
	panose-1:2 3 6 0 0 1 1 1 1 1;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
h1
	{mso-style-link:"Heading 1 Char";
	margin-top:24.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Arial","sans-serif";
	color:#365F91;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	line-height:115%;
	page-break-after:avoid;
	font-size:13.0pt;
	font-family:"Arial","sans-serif";
	color:#4F81BD;}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	line-height:115%;
	page-break-after:avoid;
	font-size:11.0pt;
	font-family:"Cambria","serif";
	color:#4F81BD;}
h4
	{mso-style-link:"Heading 4 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	line-height:115%;
	page-break-after:avoid;
	font-size:11.0pt;
	font-family:"Cambria","serif";
	color:#4F81BD;
	font-style:italic;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:5.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:5.0pt;
	margin-left:11.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.MsoFootnoteText, li.MsoFootnoteText, div.MsoFootnoteText
	{mso-style-link:"Footnote Text Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"Header Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"Footer Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	font-size:9.0pt;
	font-family:"Arial","sans-serif";
	color:#4F81BD;
	font-weight:bold;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"Title Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:15.0pt;
	margin-left:0cm;
	line-height:115%;
	border:none;
	padding:0cm;
	font-size:26.0pt;
	font-family:"Arial","sans-serif";
	color:#17365D;
	letter-spacing:.25pt;}
p.MsoTitleCxSpFirst, li.MsoTitleCxSpFirst, div.MsoTitleCxSpFirst
	{mso-style-link:"Title Char";
	margin:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0cm;
	font-size:26.0pt;
	font-family:"Arial","sans-serif";
	color:#17365D;
	letter-spacing:.25pt;}
p.MsoTitleCxSpMiddle, li.MsoTitleCxSpMiddle, div.MsoTitleCxSpMiddle
	{mso-style-link:"Title Char";
	margin:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0cm;
	font-size:26.0pt;
	font-family:"Arial","sans-serif";
	color:#17365D;
	letter-spacing:.25pt;}
p.MsoTitleCxSpLast, li.MsoTitleCxSpLast, div.MsoTitleCxSpLast
	{mso-style-link:"Title Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:15.0pt;
	margin-left:0cm;
	line-height:115%;
	border:none;
	padding:0cm;
	font-size:26.0pt;
	font-family:"Arial","sans-serif";
	color:#17365D;
	letter-spacing:.25pt;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Balloon Text Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Tahoma","sans-serif";}
span.MsoPlaceholderText
	{color:gray;}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:36.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:36.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:24.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria","serif";
	color:#365F91;
	font-weight:bold;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Arial","sans-serif";
	color:#365F91;
	font-weight:bold;}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-link:"Balloon Text";
	font-family:"Tahoma","sans-serif";}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Arial","sans-serif";
	color:#4F81BD;
	font-weight:bold;}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Cambria","serif";
	color:#4F81BD;
	font-weight:bold;}
span.Heading4Char
	{mso-style-name:"Heading 4 Char";
	mso-style-link:"Heading 4";
	font-family:"Cambria","serif";
	color:#4F81BD;
	font-weight:bold;
	font-style:italic;}
p.ppBodyText, li.ppBodyText, div.ppBodyText
	{mso-style-name:"pp Body Text";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-indent:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.ppBodyTextIndent, li.ppBodyTextIndent, div.ppBodyTextIndent
	{mso-style-name:"pp Body Text Indent";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:36.0pt;
	text-indent:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.ppBodyTextIndent2, li.ppBodyTextIndent2, div.ppBodyTextIndent2
	{mso-style-name:"pp Body Text Indent 2";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:72.0pt;
	text-indent:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.ppBulletList, li.ppBulletList, div.ppBulletList
	{mso-style-name:"pp Bullet List";
	mso-style-link:"pp Bullet List Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:37.7pt;
	text-indent:-17.85pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.ppBulletListIndent, li.ppBulletListIndent, div.ppBulletListIndent
	{mso-style-name:"pp Bullet List Indent";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:71.7pt;
	text-indent:-17.85pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.ppBulletListTable, li.ppBulletListTable, div.ppBulletListTable
	{mso-style-name:"pp Bullet List Table";
	margin-top:5.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:45.35pt;
	text-indent:-18.0pt;
	line-height:115%;
	font-size:9.0pt;
	font-family:"Arial","sans-serif";}
p.ppChapterNumber, li.ppChapterNumber, div.ppChapterNumber
	{mso-style-name:"pp Chapter Number";
	margin-top:17.0pt;
	margin-right:0cm;
	margin-bottom:18.0pt;
	margin-left:0cm;
	line-height:95.0pt;
	text-autospace:none;
	font-size:76.0pt;
	font-family:"Franklin Gothic Condensed","sans-serif";}
p.ppChapterTitle, li.ppChapterTitle, div.ppChapterTitle
	{mso-style-name:"pp Chapter Title";
	margin-top:17.0pt;
	margin-right:0cm;
	margin-bottom:29.0pt;
	margin-left:0cm;
	line-height:30.0pt;
	text-autospace:none;
	font-size:30.0pt;
	font-family:"Franklin Gothic Condensed","sans-serif";
	letter-spacing:.75pt;}
p.ppCode, li.ppCode, div.ppCode
	{mso-style-name:"pp Code";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-indent:0cm;
	line-height:13.0pt;
	background:#F7F7FF;
	text-autospace:none;
	border:none;
	padding:0cm;
	font-size:10.0pt;
	font-family:Consolas;}
p.ppCodeCxSpFirst, li.ppCodeCxSpFirst, div.ppCodeCxSpFirst
	{mso-style-name:"pp CodeCxSpFirst";
	margin:0cm;
	margin-bottom:.0001pt;
	text-indent:0cm;
	line-height:13.0pt;
	background:#F7F7FF;
	text-autospace:none;
	border:none;
	padding:0cm;
	font-size:10.0pt;
	font-family:Consolas;}
p.ppCodeCxSpMiddle, li.ppCodeCxSpMiddle, div.ppCodeCxSpMiddle
	{mso-style-name:"pp CodeCxSpMiddle";
	margin:0cm;
	margin-bottom:.0001pt;
	text-indent:0cm;
	line-height:13.0pt;
	background:#F7F7FF;
	text-autospace:none;
	border:none;
	padding:0cm;
	font-size:10.0pt;
	font-family:Consolas;}
p.ppCodeCxSpLast, li.ppCodeCxSpLast, div.ppCodeCxSpLast
	{mso-style-name:"pp CodeCxSpLast";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-indent:0cm;
	line-height:13.0pt;
	background:#F7F7FF;
	text-autospace:none;
	border:none;
	padding:0cm;
	font-size:10.0pt;
	font-family:Consolas;}
p.ppCodeIndent, li.ppCodeIndent, div.ppCodeIndent
	{mso-style-name:"pp Code Indent";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:36.0pt;
	text-indent:0cm;
	line-height:13.0pt;
	background:#F7F7FF;
	text-autospace:none;
	border:none;
	padding:0cm;
	font-size:10.0pt;
	font-family:Consolas;}
p.ppCodeIndentCxSpFirst, li.ppCodeIndentCxSpFirst, div.ppCodeIndentCxSpFirst
	{mso-style-name:"pp Code IndentCxSpFirst";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	text-indent:0cm;
	line-height:13.0pt;
	background:#F7F7FF;
	text-autospace:none;
	border:none;
	padding:0cm;
	font-size:10.0pt;
	font-family:Consolas;}
p.ppCodeIndentCxSpMiddle, li.ppCodeIndentCxSpMiddle, div.ppCodeIndentCxSpMiddle
	{mso-style-name:"pp Code IndentCxSpMiddle";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	text-indent:0cm;
	line-height:13.0pt;
	background:#F7F7FF;
	text-autospace:none;
	border:none;
	padding:0cm;
	font-size:10.0pt;
	font-family:Consolas;}
p.ppCodeIndentCxSpLast, li.ppCodeIndentCxSpLast, div.ppCodeIndentCxSpLast
	{mso-style-name:"pp Code IndentCxSpLast";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:36.0pt;
	text-indent:0cm;
	line-height:13.0pt;
	background:#F7F7FF;
	text-autospace:none;
	border:none;
	padding:0cm;
	font-size:10.0pt;
	font-family:Consolas;}
p.ppCodeIndent2, li.ppCodeIndent2, div.ppCodeIndent2
	{mso-style-name:"pp Code Indent 2";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:72.0pt;
	text-indent:0cm;
	line-height:13.0pt;
	background:#F7F7FF;
	text-autospace:none;
	border:none;
	padding:0cm;
	font-size:10.0pt;
	font-family:Consolas;}
p.ppCodeIndent2CxSpFirst, li.ppCodeIndent2CxSpFirst, div.ppCodeIndent2CxSpFirst
	{mso-style-name:"pp Code Indent 2CxSpFirst";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:72.0pt;
	margin-bottom:.0001pt;
	text-indent:0cm;
	line-height:13.0pt;
	background:#F7F7FF;
	text-autospace:none;
	border:none;
	padding:0cm;
	font-size:10.0pt;
	font-family:Consolas;}
p.ppCodeIndent2CxSpMiddle, li.ppCodeIndent2CxSpMiddle, div.ppCodeIndent2CxSpMiddle
	{mso-style-name:"pp Code Indent 2CxSpMiddle";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:72.0pt;
	margin-bottom:.0001pt;
	text-indent:0cm;
	line-height:13.0pt;
	background:#F7F7FF;
	text-autospace:none;
	border:none;
	padding:0cm;
	font-size:10.0pt;
	font-family:Consolas;}
p.ppCodeIndent2CxSpLast, li.ppCodeIndent2CxSpLast, div.ppCodeIndent2CxSpLast
	{mso-style-name:"pp Code Indent 2CxSpLast";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:72.0pt;
	text-indent:0cm;
	line-height:13.0pt;
	background:#F7F7FF;
	text-autospace:none;
	border:none;
	padding:0cm;
	font-size:10.0pt;
	font-family:Consolas;}
p.ppCodeLanguage, li.ppCodeLanguage, div.ppCodeLanguage
	{mso-style-name:"pp Code Language";
	margin:0cm;
	margin-bottom:.0001pt;
	text-indent:0cm;
	line-height:115%;
	background:#EFEFF7;
	border:none;
	padding:0cm;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";
	color:#000066;
	font-weight:bold;}
p.ppCodeLanguageIndent, li.ppCodeLanguageIndent, div.ppCodeLanguageIndent
	{mso-style-name:"pp Code Language Indent";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	text-indent:0cm;
	line-height:115%;
	background:#EFEFF7;
	border:none;
	padding:0cm;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";
	color:#000066;
	font-weight:bold;}
p.ppCodeLanguageIndent2, li.ppCodeLanguageIndent2, div.ppCodeLanguageIndent2
	{mso-style-name:"pp Code Language Indent 2";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:72.0pt;
	margin-bottom:.0001pt;
	text-indent:0cm;
	line-height:115%;
	background:#EFEFF7;
	border:none;
	padding:0cm;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";
	color:#000066;
	font-weight:bold;}
p.ppCodeLanguageTable, li.ppCodeLanguageTable, div.ppCodeLanguageTable
	{mso-style-name:"pp Code Language Table";
	margin:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	background:#EFEFF7;
	border:none;
	padding:0cm;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";
	color:#000066;
	font-weight:bold;}
p.ppCodeTable, li.ppCodeTable, div.ppCodeTable
	{mso-style-name:"pp Code Table";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	line-height:13.0pt;
	background:#F7F7FF;
	text-autospace:none;
	border:none;
	padding:0cm;
	font-size:10.0pt;
	font-family:Consolas;}
p.ppCodeTableCxSpFirst, li.ppCodeTableCxSpFirst, div.ppCodeTableCxSpFirst
	{mso-style-name:"pp Code TableCxSpFirst";
	margin:0cm;
	margin-bottom:.0001pt;
	line-height:13.0pt;
	background:#F7F7FF;
	text-autospace:none;
	border:none;
	padding:0cm;
	font-size:10.0pt;
	font-family:Consolas;}
p.ppCodeTableCxSpMiddle, li.ppCodeTableCxSpMiddle, div.ppCodeTableCxSpMiddle
	{mso-style-name:"pp Code TableCxSpMiddle";
	margin:0cm;
	margin-bottom:.0001pt;
	line-height:13.0pt;
	background:#F7F7FF;
	text-autospace:none;
	border:none;
	padding:0cm;
	font-size:10.0pt;
	font-family:Consolas;}
p.ppCodeTableCxSpLast, li.ppCodeTableCxSpLast, div.ppCodeTableCxSpLast
	{mso-style-name:"pp Code TableCxSpLast";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	line-height:13.0pt;
	background:#F7F7FF;
	text-autospace:none;
	border:none;
	padding:0cm;
	font-size:10.0pt;
	font-family:Consolas;}
p.ppFigure, li.ppFigure, div.ppFigure
	{mso-style-name:"pp Figure";
	margin:0cm;
	margin-bottom:.0001pt;
	text-indent:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.ppFigureCaption, li.ppFigureCaption, div.ppFigureCaption
	{mso-style-name:"pp Figure Caption";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-indent:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";
	font-style:italic;}
p.ppFigureCaptionIndent, li.ppFigureCaptionIndent, div.ppFigureCaptionIndent
	{mso-style-name:"pp Figure Caption Indent";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:36.0pt;
	text-indent:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";
	font-style:italic;}
p.ppFigureCaptionIndent2, li.ppFigureCaptionIndent2, div.ppFigureCaptionIndent2
	{mso-style-name:"pp Figure Caption Indent 2";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:72.0pt;
	text-indent:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";
	font-style:italic;}
p.ppFigureIndent, li.ppFigureIndent, div.ppFigureIndent
	{mso-style-name:"pp Figure Indent";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	text-indent:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.ppFigureIndent2, li.ppFigureIndent2, div.ppFigureIndent2
	{mso-style-name:"pp Figure Indent 2";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:72.0pt;
	margin-bottom:.0001pt;
	text-indent:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.ppFigureNumber, li.ppFigureNumber, div.ppFigureNumber
	{mso-style-name:"pp Figure Number";
	margin:0cm;
	margin-bottom:.0001pt;
	text-indent:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
p.ppFigureNumberIndent, li.ppFigureNumberIndent, div.ppFigureNumberIndent
	{mso-style-name:"pp Figure Number Indent";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	text-indent:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
p.ppFigureNumberIndent2, li.ppFigureNumberIndent2, div.ppFigureNumberIndent2
	{mso-style-name:"pp Figure Number Indent 2";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:72.0pt;
	margin-bottom:.0001pt;
	text-indent:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
p.ppListBodyText, li.ppListBodyText, div.ppListBodyText
	{mso-style-name:"pp List Body Text";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.ppNumberList, li.ppNumberList, div.ppNumberList
	{mso-style-name:"pp Number List";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:37.7pt;
	text-indent:-17.85pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.ppListEnd, li.ppListEnd, div.ppListEnd
	{mso-style-name:"pp List End";
	margin-top:0cm;
	margin-right:216.0pt;
	margin-bottom:6.0pt;
	margin-left:8.65pt;
	text-align:right;
	text-indent:0cm;
	line-height:4.0pt;
	border:none;
	padding:0cm;
	font-size:6.0pt;
	font-family:"Arial","sans-serif";}
p.ppNote, li.ppNote, div.ppNote
	{mso-style-name:"pp Note";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:7.1pt;
	text-indent:0cm;
	line-height:115%;
	background:#EAF1DD;
	border:none;
	padding:0cm;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.ppNoteBullet, li.ppNoteBullet, div.ppNoteBullet
	{mso-style-name:"pp Note Bullet";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	line-height:115%;
	background:#EAF1DD;
	border:none;
	padding:0cm;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.ppNoteIndent, li.ppNoteIndent, div.ppNoteIndent
	{mso-style-name:"pp Note Indent";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:43.1pt;
	text-indent:0cm;
	line-height:115%;
	background:#EAF1DD;
	border:none;
	padding:0cm;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.ppNoteIndent2, li.ppNoteIndent2, div.ppNoteIndent2
	{mso-style-name:"pp Note Indent 2";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:79.2pt;
	text-indent:0cm;
	line-height:115%;
	background:#EAF1DD;
	border:none;
	padding:0cm;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.ppNumberListIndent, li.ppNumberListIndent, div.ppNumberListIndent
	{mso-style-name:"pp Number List Indent";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:71.7pt;
	text-indent:-17.85pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.ppNumberListTable, li.ppNumberListTable, div.ppNumberListTable
	{mso-style-name:"pp Number List Table";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:9.0pt;
	font-family:"Arial","sans-serif";}
p.ppProcedureStart, li.ppProcedureStart, div.ppProcedureStart
	{mso-style-name:"pp Procedure Start";
	margin-top:4.0pt;
	margin-right:0cm;
	margin-bottom:4.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
p.ppSection, li.ppSection, div.ppSection
	{mso-style-name:"pp Section";
	margin-top:24.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Arial","sans-serif";
	color:#333399;
	font-weight:bold;}
p.ppShowMe, li.ppShowMe, div.ppShowMe
	{mso-style-name:"pp Show Me";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Britannic Bold","sans-serif";
	color:navy;}
p.ppTableText, li.ppTableText, div.ppTableText
	{mso-style-name:"pp Table Text";
	margin-top:3.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	line-height:13.0pt;
	text-autospace:none;
	font-size:9.0pt;
	font-family:"Arial","sans-serif";
	color:black;}
p.ppTopic, li.ppTopic, div.ppTopic
	{mso-style-name:"pp Topic";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:15.0pt;
	margin-left:0cm;
	line-height:115%;
	border:none;
	padding:0cm;
	font-size:26.0pt;
	font-family:"Arial","sans-serif";
	color:#17365D;
	letter-spacing:.25pt;}
p.ppTopicCxSpFirst, li.ppTopicCxSpFirst, div.ppTopicCxSpFirst
	{mso-style-name:"pp TopicCxSpFirst";
	margin:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0cm;
	font-size:26.0pt;
	font-family:"Arial","sans-serif";
	color:#17365D;
	letter-spacing:.25pt;}
p.ppTopicCxSpMiddle, li.ppTopicCxSpMiddle, div.ppTopicCxSpMiddle
	{mso-style-name:"pp TopicCxSpMiddle";
	margin:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0cm;
	font-size:26.0pt;
	font-family:"Arial","sans-serif";
	color:#17365D;
	letter-spacing:.25pt;}
p.ppTopicCxSpLast, li.ppTopicCxSpLast, div.ppTopicCxSpLast
	{mso-style-name:"pp TopicCxSpLast";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:15.0pt;
	margin-left:0cm;
	line-height:115%;
	border:none;
	padding:0cm;
	font-size:26.0pt;
	font-family:"Arial","sans-serif";
	color:#17365D;
	letter-spacing:.25pt;}
span.FootnoteTextChar
	{mso-style-name:"Footnote Text Char";
	mso-style-link:"Footnote Text";
	font-family:"Times New Roman","serif";}
span.HeaderChar
	{mso-style-name:"Header Char";
	mso-style-link:Header;
	font-family:"Times New Roman","serif";}
span.FooterChar
	{mso-style-name:"Footer Char";
	mso-style-link:Footer;
	font-family:"Times New Roman","serif";}
span.ppBulletListChar
	{mso-style-name:"pp Bullet List Char";
	mso-style-link:"pp Bullet List";
	font-family:"Times New Roman","serif";}
span.TitleChar
	{mso-style-name:"Title Char";
	mso-style-link:Title;
	font-family:"Arial","sans-serif";
	color:#17365D;
	letter-spacing:.25pt;}
p.ppBodyTextIndent3, li.ppBodyTextIndent3, div.ppBodyTextIndent3
	{mso-style-name:"pp Body Text Indent 3";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:108.0pt;
	text-indent:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.ppBulletListIndent2, li.ppBulletListIndent2, div.ppBulletListIndent2
	{mso-style-name:"pp Bullet List Indent 2";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:105.75pt;
	text-indent:-17.85pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.ppNumberListIndent2, li.ppNumberListIndent2, div.ppNumberListIndent2
	{mso-style-name:"pp Number List Indent 2";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:105.75pt;
	text-indent:-17.85pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.ppCodeIndent3, li.ppCodeIndent3, div.ppCodeIndent3
	{mso-style-name:"pp Code Indent 3";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:108.0pt;
	text-indent:0cm;
	line-height:13.0pt;
	background:#F7F7FF;
	text-autospace:none;
	border:none;
	padding:0cm;
	font-size:10.0pt;
	font-family:Consolas;}
p.ppCodeIndent3CxSpFirst, li.ppCodeIndent3CxSpFirst, div.ppCodeIndent3CxSpFirst
	{mso-style-name:"pp Code Indent 3CxSpFirst";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:108.0pt;
	margin-bottom:.0001pt;
	text-indent:0cm;
	line-height:13.0pt;
	background:#F7F7FF;
	text-autospace:none;
	border:none;
	padding:0cm;
	font-size:10.0pt;
	font-family:Consolas;}
p.ppCodeIndent3CxSpMiddle, li.ppCodeIndent3CxSpMiddle, div.ppCodeIndent3CxSpMiddle
	{mso-style-name:"pp Code Indent 3CxSpMiddle";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:108.0pt;
	margin-bottom:.0001pt;
	text-indent:0cm;
	line-height:13.0pt;
	background:#F7F7FF;
	text-autospace:none;
	border:none;
	padding:0cm;
	font-size:10.0pt;
	font-family:Consolas;}
p.ppCodeIndent3CxSpLast, li.ppCodeIndent3CxSpLast, div.ppCodeIndent3CxSpLast
	{mso-style-name:"pp Code Indent 3CxSpLast";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:108.0pt;
	text-indent:0cm;
	line-height:13.0pt;
	background:#F7F7FF;
	text-autospace:none;
	border:none;
	padding:0cm;
	font-size:10.0pt;
	font-family:Consolas;}
p.ppCodeLanguageIndent3, li.ppCodeLanguageIndent3, div.ppCodeLanguageIndent3
	{mso-style-name:"pp Code Language Indent 3";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:108.0pt;
	margin-bottom:.0001pt;
	text-indent:0cm;
	line-height:115%;
	background:#EFEFF7;
	border:none;
	padding:0cm;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";
	color:#000066;
	font-weight:bold;}
p.ppNoteIndent3, li.ppNoteIndent3, div.ppNoteIndent3
	{mso-style-name:"pp Note Indent 3";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:115.1pt;
	text-indent:0cm;
	line-height:115%;
	background:#EAF1DD;
	border:none;
	padding:0cm;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.ppFigureIndent3, li.ppFigureIndent3, div.ppFigureIndent3
	{mso-style-name:"pp Figure Indent 3";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:108.0pt;
	margin-bottom:.0001pt;
	text-indent:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";}
p.ppFigureCaptionIndent3, li.ppFigureCaptionIndent3, div.ppFigureCaptionIndent3
	{mso-style-name:"pp Figure Caption Indent 3";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:108.0pt;
	text-indent:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";
	font-style:italic;}
p.ppFigureNumberIndent3, li.ppFigureNumberIndent3, div.ppFigureNumberIndent3
	{mso-style-name:"pp Figure Number Indent 3";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:108.0pt;
	margin-bottom:.0001pt;
	text-indent:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
.MsoPapDefault
	{margin-bottom:10.0pt;
	line-height:115%;}
@page Section1
	{size:612.0pt 792.0pt;
	margin:70.85pt 3.0cm 70.85pt 3.0cm;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=ES-AR link=blue vlink=purple>

<div class=Section1>

<div style='border:none;border-bottom:solid #4F81BD 1.0pt;padding:0cm 0cm 4.0pt 0cm'>

<p class=MsoTitle align=center style='text-align:center'><span lang=EN-US>Protocol
Bridge Claims Provider</span></p>

</div>

<p class=MsoTocHeading><span class=Heading1Char><span lang=EN-US
style='font-weight:normal'>Table of Contents</span></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoToc1><span lang=EN-US><span class=MsoHyperlink><a
href="#_Toc263022267">Getting Started<span style='color:windowtext;display:
none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc263022268">Configuring an ASP.NET application to use the Multi
Protocol STS<span style='color:windowtext;display:none;text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>3</span></a></span></span></p>

<p class=MsoToc1><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc263022269">Configuration<span style='color:windowtext;display:none;
text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>6</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc263022270">General Properties<span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>6</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc263022271">Claims Providers<span style='color:windowtext;display:
none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>7</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc263022272">Scopes<span style='color:windowtext;display:none;
text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>8</span></a></span></span></p>

<p class=MsoToc1><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc263022273">More info<span style='color:windowtext;display:none;
text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>9</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc263022274">The story behind<span style='color:windowtext;display:
none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>9</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc263022275">Known Issues<span style='color:windowtext;display:none;
text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>10</span></a></span></span></p>

<p class=MsoToc2><span class=MsoHyperlink><span lang=EN-US><a
href="#_Toc263022276">Main contributors<span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>10</span></a></span></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h1><a name="_Toc263022267"><span lang=EN-US>Getting Started</span></a></h1>

<p class=MsoNormal><span lang=EN-US>The Multi Protocol Security Token Service
is a WS-Federation aware token issuer that allows bridging with other
authentication protocols like OpenID, OAuth or other custom protocols like
LiveID.</span></p>

<p class=MsoNormal><img width=632 height=281 id="Picture 6"
src="index_files/image001.png"></p>

<p class=MsoNormal><span lang=EN-US>Once installed, open a browser and go to
one of the sample web applications <a href="https://localhost/SampleRP">https://localhost/SampleRP</a>.
This is the flow between the web application (ASP.NET MVC with WIF), the STS
(ASP.NET MVC with WIF) and Yahoo identity provider (OpenID).</span></p>

<p class=MsoNormal><img border=0 width=781 height=1050 id="Picture 7"
src="index_files/image002.png"></p>

<h2><a name="_Toc263022268"><span lang=EN-US>Configuring an ASP.NET application
to use the Multi Protocol STS</span></a></h2>

<p class=ppProcedureStart><span lang=EN-US style='font-weight:normal'>The
following step by step instructions show how to configure an ASP.NET
application to trusts the Protocol Bridge Claims Provider.</span></p>

<p class=ppNumberList><span lang=EN-US>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Open Visual Studio 2008 (or 2010)</span></p>

<p class=ppNumberList><span lang=EN-US>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Create a new <b>ASP.NET Web Site</b></span></p>

<p class=ppFigureIndent style='text-indent:0cm'><img border=0 width=506
height=328 id="Picture 14" src="index_files/image003.jpg"></p>

<p class=ppNumberList><span lang=EN-US>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Right click on the project and press <b>Add STS
Reference…</b></span></p>

<p class=ppFigureIndent style='text-indent:0cm'><img border=0 width=350
height=250 id="Picture 13" src="index_files/image004.png"></p>

<p class=ppNumberList><span lang=EN-US>4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Leave the default values but add <b>Default.aspx</b>
in the <b>Application URI textbox</b>. </span></p>

<p class=ppFigureIndent style='text-indent:0cm'><img border=0 width=566
height=428 id="Picture 35" src="index_files/image005.jpg"></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=ppNumberList><span lang=EN-US>5.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Select Use an existing STS and enter the url of
the multi protocol STS (the installation will create an entry in the HOSTS file
and virtual directory in IIS default website). The default url is <a
href="https://www.multiprotocolissuer.net/MultiProtocolIssuerSts">https://www.multiprotocolissuer.net/MultiProtocolIssuerSts</a>.
Press Yes when the certificate warning shows up.</span></p>

<p class=ppFigureIndent style='text-indent:0cm'><img border=0 width=566
height=428 id="Picture 20" src="index_files/image006.jpg"></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=ppNumberList><span lang=EN-US>6.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Select <b>No encryption</b> and press Next. By
default the Multi Protocol STS does not encrypt tokens.</span></p>

<p class=ppFigureIndent style='text-indent:0cm'><img border=0 width=566
height=428 id="Picture 26" src="index_files/image007.jpg"></p>

<p class=ppNumberList><span lang=EN-US>7.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>These are the claims offered by the STS. Press
Next</span></p>

<p class=ppFigureIndent style='text-indent:0cm'><img border=0 width=566
height=428 id="Picture 29" src="index_files/image008.jpg"></p>

<p class=ppNumberList><span lang=EN-US>8.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Press Finish.</span></p>

<p class=ppNumberList><span lang=EN-US>9.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Replace the Default.aspx markup with this (this
markup will extract the claims from the IClaimsIdentity of the principal and 
show them)</span></p>

<div style='border:none;border-bottom:solid #C8CDDE 1.0pt;padding:0cm 0cm 1.0pt 0cm;
background:#EFEFF7;margin-left:36.0pt;margin-right:0cm'>

<p class=ppCodeLanguageIndent style='margin-left:0cm;text-indent:0cm;
background:#EFEFF7'><span lang=EN-US>ASPX</span></p>

</div>

<div style='border-top:solid white 1.0pt;border-left:none;border-bottom:solid #D5D5D3 1.0pt;
border-right:none;padding:1.0pt 0cm 1.0pt 0cm;background:#F7F7FF;margin-left:
36.0pt;margin-right:0cm'>

<p class=ppCodeIndentCxSpFirst style='margin-left:0cm;text-indent:0cm;
background:#F7F7FF'><span lang=EN-US>&lt;%@ Page Language=&quot;C#&quot;
AutoEventWireup=&quot;true&quot;  CodeFile=&quot;Default.aspx.cs&quot;
Inherits=&quot;_Default&quot; ValidateRequest=&quot;false&quot; %&gt;</span></p>

<p class=ppCodeIndentCxSpMiddle style='margin-left:0cm;text-indent:0cm;
background:#F7F7FF'><span lang=EN-US>&nbsp;</span></p>

<p class=ppCodeIndentCxSpMiddle style='margin-left:0cm;text-indent:0cm;
background:#F7F7FF'><span lang=EN-US>&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD
XHTML 1.0 Transitional//EN&quot;
&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</span></p>

<p class=ppCodeIndentCxSpMiddle style='margin-left:0cm;text-indent:0cm;
background:#F7F7FF'><span lang=EN-US>&nbsp;</span></p>

<p class=ppCodeIndentCxSpMiddle style='margin-left:0cm;text-indent:0cm;
background:#F7F7FF'><span lang=EN-US>&lt;html
xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;</span></p>

<p class=ppCodeIndentCxSpMiddle style='margin-left:0cm;text-indent:0cm;
background:#F7F7FF'><span lang=EN-US>&lt;head runat=&quot;server&quot;&gt;</span></p>

<p class=ppCodeIndentCxSpMiddle style='margin-left:0cm;text-indent:0cm;
background:#F7F7FF'><span lang=EN-US>    &lt;title&gt;&lt;/title&gt;</span></p>

<p class=ppCodeIndentCxSpMiddle style='margin-left:0cm;text-indent:0cm;
background:#F7F7FF'><span lang=EN-US>&lt;/head&gt;</span></p>

<p class=ppCodeIndentCxSpMiddle style='margin-left:0cm;text-indent:0cm;
background:#F7F7FF'><span lang=EN-US>&lt;body&gt;</span></p>

<p class=ppCodeIndentCxSpMiddle style='margin-left:0cm;text-indent:0cm;
background:#F7F7FF'><span lang=EN-US>    &lt;form id=&quot;form1&quot; runat=&quot;server&quot;&gt;</span></p>

<p class=ppCodeIndentCxSpMiddle style='margin-left:0cm;text-indent:0cm;
background:#F7F7FF'><span lang=EN-US>    &lt;div&gt;</span></p>

<p class=ppCodeIndentCxSpMiddle style='margin-left:0cm;text-indent:0cm;
background:#F7F7FF'><span lang=EN-US>    &lt;% foreach (var claim in
((Microsoft.IdentityModel.Claims.IClaimsIdentity)User.Identity).Claims)</span></p>

<p class=ppCodeIndentCxSpMiddle style='margin-left:0cm;text-indent:0cm;
background:#F7F7FF'><span lang=EN-US>       {  %&gt;</span></p>

<p class=ppCodeIndentCxSpMiddle style='margin-left:0cm;text-indent:0cm;
background:#F7F7FF'><span lang=EN-US>       &lt;strong&gt;&lt;%=claim.ClaimType
%&gt;&lt;/strong&gt;:&lt;%=claim.Value %&gt;&lt;br /&gt;</span></p>

<p class=ppCodeIndentCxSpMiddle style='margin-left:0cm;text-indent:0cm;
background:#F7F7FF'><span lang=EN-US>    &lt;% } %&gt;</span></p>

<p class=ppCodeIndentCxSpMiddle style='margin-left:0cm;text-indent:0cm;
background:#F7F7FF'><span lang=EN-US>    &lt;/div&gt;</span></p>

<p class=ppCodeIndentCxSpMiddle style='margin-left:0cm;text-indent:0cm;
background:#F7F7FF'><span lang=EN-US>    &lt;/form&gt;</span></p>

<p class=ppCodeIndentCxSpMiddle style='margin-left:0cm;text-indent:0cm;
background:#F7F7FF'><span lang=EN-US>&lt;/body&gt;</span></p>

<p class=ppCodeIndentCxSpLast style='margin-left:0cm;text-indent:0cm;
background:#F7F7FF'><span lang=EN-US>&lt;/html&gt;</span></p>

</div>

<p class=ppNumberList><span lang=EN-US>10.<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>Open the Multi Protocol STS Web.config and add
the following scope to the list of scopes.</span></p>

<div style='border:none;border-bottom:solid #C8CDDE 1.0pt;padding:0cm 0cm 1.0pt 0cm;
background:#EFEFF7;margin-left:36.0pt;margin-right:0cm'>

<p class=ppCodeLanguageIndent style='margin-left:0cm;text-indent:0cm;
background:#EFEFF7'><span lang=EN-US>Web.config</span></p>

</div>

<div style='border-top:solid white 1.0pt;border-left:none;border-bottom:solid #D5D5D3 1.0pt;
border-right:none;padding:1.0pt 0cm 1.0pt 0cm;background:#F7F7FF;margin-left:
36.0pt;margin-right:0cm'>

<p class=ppCodeIndentCxSpFirst style='margin-left:0cm;text-indent:0cm;
background:#F7F7FF'><span lang=EN-US>&lt;scope </span></p>

<p class=ppCodeIndentCxSpMiddle style='margin-left:0cm;text-indent:0cm;
background:#F7F7FF'><span lang=EN-US>     
uri=&quot;http://localhost:6879/WebSite1/Default.aspx&quot; </span></p>

<p class=ppCodeIndentCxSpMiddle style='margin-left:0cm;text-indent:0cm;
background:#F7F7FF'><span lang=EN-US>     
identifier=&quot;http://localhost:6879/WebSite1/Default.aspx&quot; </span></p>

<p class=ppCodeIndentCxSpLast style='margin-left:0cm;text-indent:0cm;
background:#F7F7FF'><span lang=EN-US>      useClaimsPolicyEngine=&quot;false&quot;
/&gt;</span></p>

</div>

<div style='border:none;border-top:solid silver 1.0pt;padding:1.0pt 0cm 0cm 0cm;
margin-left:8.65pt;margin-right:216.0pt'>

<p class=ppListEnd style='margin-top:0cm;margin-right:0cm;margin-bottom:6.0pt;
margin-left:0cm;text-indent:0cm'><span lang=EN-US>&nbsp;</span></p>

</div>

<h1><a name="_Toc263022269"><span lang=EN-US>Configuration</span></a></h1>

<h2><a name="_Toc263022270"><span lang=EN-US>General Properties</span></a></h2>

<p class=MsoNormal><span lang=EN-US>The Multi Protocol STS has some general
properties</span></p>

<div style='border:none;border-bottom:solid #C8CDDE 1.0pt;padding:0cm 0cm 1.0pt 0cm;
background:#EFEFF7'>

<p class=ppCodeLanguage style='margin-left:0cm;text-indent:0cm;background:#EFEFF7'><span
lang=EN-US>Web.config</span></p>

</div>

<div style='border-top:solid white 1.0pt;border-left:none;border-bottom:solid #D5D5D3 1.0pt;
border-right:none;padding:1.0pt 0cm 1.0pt 0cm;background:#F7F7FF'>

<p class=ppCodeCxSpFirst style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>&lt;multiProtocolIssuer
identifier=&quot;https://www.multiprotocolissuer.net/&quot;
responseEndpoint=&quot;https://www.multiprotocolissuer.net/MultiProtocolIssuerSts/response&quot;&gt;</span></p>

<p class=ppCodeCxSpLast style='margin-left:0cm;text-indent:0cm;background:#F7F7FF'><span
lang=EN-US>  &lt;signingCertificate findValue=&quot;CN=localhost&quot;
storeLocation=&quot;LocalMachine&quot; storeName=&quot;My&quot;
x509FindType=&quot;FindBySubjectName&quot;/&gt;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<table class=LightList1 border=1 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;border:none'>
 <tr>
  <td width=149 valign=top style='width:111.75pt;border-top:solid black 1.0pt;
  border-left:solid black 1.0pt;border-bottom:none;border-right:none;
  background:black;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><b><span lang=EN-US
  style='color:white'>Configuration Attribute/Element</span></b></p>
  </td>
  <td width=450 valign=top style='width:337.15pt;border-top:solid black 1.0pt;
  border-left:none;border-bottom:none;border-right:solid black 1.0pt;
  background:black;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><b><span lang=EN-US
  style='color:white'>Description</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=149 valign=top style='width:111.75pt;border:solid black 1.0pt;
  border-right:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><b><span lang=EN-US>identifier</span></b></p>
  </td>
  <td width=450 valign=top style='width:337.15pt;border:solid black 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><span lang=EN-US>The identifier
  of the STS (an arbitrary URI)</span></p>
  </td>
 </tr>
 <tr>
  <td width=149 valign=top style='width:111.75pt;border:none;border-left:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><b><span lang=EN-US>responseEndpoint</span></b></p>
  </td>
  <td width=450 valign=top style='width:337.15pt;border:none;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><span lang=EN-US>An endpoint
  that would accept the HTTP response (if any) from the different protocols</span></p>
  </td>
 </tr>
 <tr>
  <td width=149 valign=top style='width:111.75pt;border:solid black 1.0pt;
  border-right:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><b><span lang=EN-US>siginingCertificate</span></b></p>
  </td>
  <td width=450 valign=top style='width:337.15pt;border:solid black 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><span lang=EN-US>the X509
  certificate used to sign the outgoing tokens</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h2><a name="_Toc263022271"><span lang=EN-US>Claims Providers</span></a></h2>

<p class=MsoNormal><span lang=EN-US>In the Multi Protocol STS, a claims
provider is an authoritative source of claims. These are configured in the
Web.config as shown below. A claims provider talks a specific protocol (OpenID
with Attribute Exchange, OpenID with SReg, OAuth 2.0, a custom protocol, etc.),
so a claims provider is linked to a protocol handler, a class that implements
the protocol. The Multi Protocol STS was tested against three well known claims
provider: Yahoo, Facebook and LiveId.</span></p>

<div style='border:none;border-bottom:solid #C8CDDE 1.0pt;padding:0cm 0cm 1.0pt 0cm;
background:#EFEFF7'>

<p class=ppCodeLanguage style='margin-left:0cm;text-indent:0cm;background:#EFEFF7'><span
lang=EN-US>XML</span></p>

</div>

<div style='border-top:solid white 1.0pt;border-left:none;border-bottom:solid #D5D5D3 1.0pt;
border-right:none;padding:1.0pt 0cm 1.0pt 0cm;background:#F7F7FF'>

<p class=ppCodeCxSpFirst style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>&lt;claimProviders&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>        &lt;add identifier=&quot;urn:Yahoo:AX&quot;
url=&quot;http://yahoo.com/&quot; protocolHandler=&quot;OpenIdAxHandler&quot;
profile=&quot;AX&quot; /&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>        &lt;add identifier=&quot;urn:LiveId&quot;
url=&quot;https://login.live.com/wlogin.srf&quot;
protocolHandler=&quot;LiveIdHandler&quot;
allowCompleteProfileForm=&quot;true&quot;&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>          &lt;params&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>            &lt;add key=&quot;wll_appid&quot;
value=&quot;000000004403607C&quot;/&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>            &lt;add key=&quot;wll_secret&quot;
value=&quot;IbAu38iuwwRbst5vl1CuJRfHx3e7vcWl&quot;/&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>            &lt;add
key=&quot;wll_securityalgorithm&quot; value=&quot;wsignin1.0&quot;/&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>          &lt;/params&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>        &lt;/add&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>        &lt;add identifier=&quot;urn:Facebook&quot;
url=&quot;https://graph.facebook.com/oauth/authorize&quot;
protocolHandler=&quot;FacebookHandler&quot; profile=&quot;OAuth2.0&quot;&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>          &lt;params&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>            &lt;add key=&quot;api_url&quot;
value=&quot;https://graph.facebook.com&quot; /&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>            &lt;add key=&quot;application_id&quot;
value=&quot;122744481090516&quot; /&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>            &lt;add key=&quot;api_key&quot;
value=&quot;b61ec28402117d024abc235177c82e92&quot; /&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>            &lt;add key=&quot;secret&quot;
value=&quot;51fb4330162e14914832131f39f8a530&quot; /&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>          &lt;/params&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>        &lt;/add&gt;</span></p>

<p class=ppCodeCxSpLast style='margin-left:0cm;text-indent:0cm;background:#F7F7FF'><span
lang=EN-US>      &lt;/claimProviders&gt;</span></p>

</div>

<p class=ppBodyText><span lang=EN-US>&nbsp;</span></p>

<table class=LightList1 border=1 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;border:none'>
 <tr>
  <td width=149 valign=top style='width:111.75pt;border-top:solid black 1.0pt;
  border-left:solid black 1.0pt;border-bottom:none;border-right:none;
  background:black;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><b><span lang=EN-US
  style='color:white'>Configuration Attribute/Element</span></b></p>
  </td>
  <td width=450 valign=top style='width:337.15pt;border-top:solid black 1.0pt;
  border-left:none;border-bottom:none;border-right:solid black 1.0pt;
  background:black;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><b><span lang=EN-US
  style='color:white'>Description</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=149 valign=top style='width:111.75pt;border:solid black 1.0pt;
  border-right:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><b><span lang=EN-US>identifier</span></b></p>
  </td>
  <td width=450 valign=top style='width:337.15pt;border:solid black 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><span lang=EN-US>The identifier
  of the claim provider (an arbitrary URI). This identifier has to match with
  the <i>whr</i> parameter used in the website that hosts the STS. Clicking on
  one of the logos, will redirect to /authenticate?whr=<i>identifier-of-the-claims-provider</i></span></p>
  </td>
 </tr>
 <tr>
  <td width=149 valign=top style='width:111.75pt;border:none;border-left:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><b><span lang=EN-US>url</span></b></p>
  </td>
  <td width=450 valign=top style='width:337.15pt;border:none;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><span lang=EN-US>The endpoint
  of the claim provider where the user will be redirected</span></p>
  </td>
 </tr>
 <tr>
  <td width=149 valign=top style='width:111.75pt;border:solid black 1.0pt;
  border-right:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><b><span lang=EN-US>protocolHandler</span></b></p>
  </td>
  <td width=450 valign=top style='width:337.15pt;border:solid black 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><span lang=EN-US>The friendly
  name of the protocol handler class that will process the sign in request and
  response. The list of protocol handlers can be found in the Web.config in the
  &lt;unity&gt; section.</span></p>
  </td>
 </tr>
 <tr>
  <td width=149 valign=top style='width:111.75pt;border:none;border-left:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><b><span lang=EN-US>profile</span></b></p>
  </td>
  <td width=450 valign=top style='width:337.15pt;border:none;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><span lang=EN-US>The profile
  implemented within the particular protocol. This attribute is just
  informative and does not change any runtime behavior</span></p>
  </td>
 </tr>
 <tr>
  <td width=149 valign=top style='width:111.75pt;border:solid black 1.0pt;
  border-right:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><b><span lang=EN-US>params</span></b></p>
  </td>
  <td width=450 valign=top style='width:337.15pt;border:solid black 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><span lang=EN-US>A set of key
  value pairs that will be sent to the protocol handler. Typically, this key
  value pairs will hold API keys, app identifiers, etc. needed to talk against
  the claim provider</span></p>
  <p class=MsoNormal style='line-height:normal'><b><span lang=EN-US>Note</span></b><span
  lang=EN-US>:  if you will use this in a real application make sure to change
  the default parameters.</span></p>
  </td>
 </tr>
</table>

<p class=ppBodyText><span lang=EN-US>&nbsp;</span></p>

<h2><a name="_Toc263022272"><span lang=EN-US>Scopes</span></a></h2>

<p class=MsoNormal><span lang=EN-US>In the Multi Protocol STS, a scope is the
application that is requesting a token. These are configured in the Web.config
as shown below and represent a white-list of applications that can use the STS.</span></p>

<div style='border:none;border-bottom:solid #C8CDDE 1.0pt;padding:0cm 0cm 1.0pt 0cm;
background:#EFEFF7'>

<p class=ppCodeLanguage style='margin-left:0cm;text-indent:0cm;background:#EFEFF7'><span
lang=EN-US>Web.config</span></p>

</div>

<div style='border-top:solid white 1.0pt;border-left:none;border-bottom:solid #D5D5D3 1.0pt;
border-right:none;padding:1.0pt 0cm 1.0pt 0cm;background:#F7F7FF'>

<p class=ppCodeCxSpFirst style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>&lt;scope uri=&quot;https://localhost/SampleRP&quot;
identifier=&quot;https://localhost/SampleRP&quot;
useClaimsPolicyEngine=&quot;true&quot;&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>  &lt;claimRequirements&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>    &lt;add
type=&quot;http://schema.openid.net/namePerson&quot; name=&quot;name&quot;
demandLevel=&quot;Request&quot; /&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>    &lt;add
type=&quot;http://schema.openid.net/contact/email&quot; name=&quot;email&quot;
demandLevel=&quot;Request&quot; /&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>    &lt;add
type=&quot;http://schema.openid.net/person/gender&quot; name=&quot;gender&quot;
demandLevel=&quot;Request&quot; /&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>&nbsp;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>    &lt;add
type=&quot;http://axschema.org/namePerson&quot; name=&quot;name&quot;
demandLevel=&quot;Request&quot; /&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>    &lt;add
type=&quot;http://axschema.org/contact/email&quot; name=&quot;email&quot; demandLevel=&quot;Request&quot;
/&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>    &lt;add
type=&quot;http://axschema.org/person/gender&quot; name=&quot;gender&quot;
demandLevel=&quot;Request&quot; /&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>&nbsp;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>    &lt;add
type=&quot;http://schema.facebook.com/me/email&quot; name=&quot;email&quot;
demandLevel=&quot;Request&quot; /&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>&nbsp;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>  &lt;/claimRequirements&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>  </span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>  &lt;allowedClaimProviders&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>    &lt;add name=&quot;urn:Yahoo:AX&quot; /&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>    &lt;add name=&quot;urn:MyOpenID:Sreg&quot; /&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>    &lt;add name=&quot;urn:AOL:AX&quot; /&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>    &lt;add name=&quot;urn:LiveId&quot; /&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>    &lt;add name=&quot;urn:Facebook&quot; /&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>  &lt;/allowedClaimProviders&gt;</span></p>

<p class=ppCodeCxSpMiddle style='margin-left:0cm;text-indent:0cm;background:
#F7F7FF'><span lang=EN-US>  </span></p>

<p class=ppCodeCxSpLast style='margin-left:0cm;text-indent:0cm;background:#F7F7FF'><span
lang=EN-US>&lt;/scope&gt;</span></p>

</div>

<p class=ppBodyText><span lang=EN-US>&nbsp;</span></p>

<table class=LightList1 border=1 cellspacing=0 cellpadding=0 style='border-collapse:
 collapse;border:none'>
 <tr>
  <td width=149 valign=top style='width:111.75pt;border-top:solid black 1.0pt;
  border-left:solid black 1.0pt;border-bottom:none;border-right:none;
  background:black;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><b><span lang=EN-US
  style='color:white'>Configuration Attribute/Element</span></b></p>
  </td>
  <td width=450 valign=top style='width:337.15pt;border-top:solid black 1.0pt;
  border-left:none;border-bottom:none;border-right:solid black 1.0pt;
  background:black;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><b><span lang=EN-US
  style='color:white'>Description</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=149 valign=top style='width:111.75pt;border:solid black 1.0pt;
  border-right:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><b><span lang=EN-US>identifier</span></b></p>
  </td>
  <td width=450 valign=top style='width:337.15pt;border:solid black 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><b><i><span lang=EN-US>Required</span></i></b><span
  lang=EN-US>. The identifier of the scope (an arbitrary URI). This identifier
  has to match with the <i>wtrealm </i>parameter sent by the web application.</span></p>
  </td>
 </tr>
 <tr>
  <td width=149 valign=top style='width:111.75pt;border:none;border-left:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><b><span lang=EN-US>url</span></b></p>
  </td>
  <td width=450 valign=top style='width:337.15pt;border:none;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><b><i><span lang=EN-US>Required</span></i></b><span
  lang=EN-US>. The endpoint of the scope where the token will be posted back if
  no <i>wreply</i> parameter was sent.</span></p>
  </td>
 </tr>
 <tr>
  <td width=149 valign=top style='width:111.75pt;border:solid black 1.0pt;
  border-right:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><b><span lang=EN-US>useClaimsPolicyEngine</span></b></p>
  </td>
  <td width=450 valign=top style='width:337.15pt;border:solid black 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><b><i><span lang=EN-US>Optional
  </span></i></b><span lang=EN-US>(default false). If false, all the claims
  coming from the claim provider will be copied to the output token. If true, a
  rules engine will be used to transform the incoming claims to outgoing
  claims. This engine uses XML to author the rules. See the Claims Policy
  Engine for more details [TBD].</span></p>
  </td>
 </tr>
 <tr>
  <td width=149 valign=top style='width:111.75pt;border:none;border-left:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><b><span lang=EN-US>claimRequirements</span></b></p>
  </td>
  <td width=450 valign=top style='width:337.15pt;border:none;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><b><i><span lang=EN-US>Optional</span></i></b><span
  lang=EN-US>. Some of the protocols (like OpenID) require to specify the claim
  types to demand from the claim providers. This section allows configuring
  what claims should be requested for a specific application. Depending on the
  implementation of the claims provider it will ask the user to give consent
  about the disclosure of those claims. Each claim has a demand level
  (NoRequest, Request, Require).</span></p>
  </td>
 </tr>
 <tr>
  <td width=149 valign=top style='width:111.75pt;border:solid black 1.0pt;
  border-right:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><b><span lang=EN-US>allowedClaimProviders</span></b></p>
  </td>
  <td width=450 valign=top style='width:337.15pt;border:solid black 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:normal'><b><i><span lang=EN-US>Optional</span></i></b><span
  lang=EN-US>. A set of claim providers allowed for a specific application. The
  intended usage of this is to show/hide the logos on the identity selector web
  page. It does not affect the runtime behavior.</span></p>
  </td>
 </tr>
</table>

<h1><a name="_Toc263022273"><span lang=EN-US>More info</span></a></h1>

<h2><a name="_Toc263022274"><span lang=EN-US>The story behind</span></a></h2>

<p class=MsoNormal><span lang=EN-US>This work is the result of a proof of
concept we did with the Microsoft Federated Identity Interop group (lead by <a
href="http://self-issued.info">Mike Jones</a>), <a
href="http://www.medtronic.com">Medtronic</a> and <a
href="https://www.paypal-ids.com/">PayPal</a>. The business scenario brought by
Medtronic is around an insulin pump trial registration. In order to register to
this trial, users would login with PayPal, which represents a trusted authority
for authentication and attributes like shipping address and age for Medtronic.
However, authentication alone is not enough for the purpose of the trial.
Medtronic wants to enrich the identity of the user with other attributes that
belong to their realm. In essence, they are doing an identity mash up and using
this “mashed” token to access other applications/services. An example of this
kind of applications is a site we created called <i>Contoso Opinions</i> that
allowed users with a Medtronic token (containing PayPal and Medtronic
attributes) to comment about their experience with the device. </span></p>

<p class=MsoNormal><span lang=EN-US>While there are many ways to solve a
scenario like this, we chose to create an intermediary Security Token Service
that understands the OpenID protocol (used by PayPal), WS-Federation protocol
and SAML tokens (used by Medtronic apps). This intermediary STS would also
allow SSO between the web applications, avoiding re-authentication with the
original identity provider (PayPal).</span></p>

<p class=MsoNormal><span lang=EN-US>We decided together with the Microsoft Federated
Identity Interop team to make the implementation of this intermediary multi
protocol STS available under open source.</span></p>

<h2><a name="_Toc263022275"><span lang=EN-US>Known Issues</span></a></h2>

<p class=ppBulletList><span lang=EN-US style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Single sign on is not working properly with web
applications hosted in localhost.</span></p>

<p class=ppBulletList><span lang=EN-US style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>The allowedClaimProviders configuration does not
alter the behavior of the STS</span></p>

<p class=ppBulletList><span lang=EN-US style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Exception handling can be enhanced with more
detailed errors</span></p>

<p class=ppBulletList><span lang=EN-US style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>No performance/stress test has been done</span></p>

<h2><a name="_Toc263022276"><span lang=EN-US>Main contributors</span></a></h2>

<p class=ppBodyText style='margin-left:36.0pt;text-indent:-18.0pt'><span
lang=EN-US style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Juan Pablo Garcia (blog: <a
href="http://blogs.southworks.net/jpgarcia">http://blogs.southworks.net/jpgarcia</a>
twitter: @jpgd mail: juanpablo dot garcia at southworks dot net)</span></p>

<p class=ppBodyText style='margin-left:36.0pt;text-indent:-18.0pt'><span
lang=EN-US style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Matias Woloski (blog: <a
href="http://blogs.southwokrs.net/mwoloski">http://blogs.southwokrs.net/mwoloski</a>
twitter:@woloski mail: matias at southworks dot net)</span></p>

<p class=ppBodyText><span lang=EN-US>&nbsp;</span></p>

<p class=ppBodyText style='margin-left:0cm;text-indent:0cm'><span lang=EN-US><a
href="http://github.com/southworks"><span lang=ES-AR style='color:windowtext;
text-decoration:none'><img border=0 width=105 height=105 id="Picture 1"
src="index_files/image009.png" alt="2010-05-30 17:06:42"></span></a></span></p>

</div>

</body>

</html>
